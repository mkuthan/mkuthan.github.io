
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Passionate Developer</title>
  <meta name="author" content="Marcin Kuthan">

  
  <meta name="description" content="Virtual Disk Image (VDI) is a Virtual Box container format for guest hard
disk. I found that VDI files on the host system grows over the time. If &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mkuthan.github.io/blog/page/3">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Passionate Developer" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-50832428-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Passionate Developer</a></h1>
  
    <h2>Memory is unreliable like a software, so make my thoughts more eternal and my software more reliable</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mkuthan.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/11/virtual-box-vdi-maintanance/">Virtual Box VDI Maintanance</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-11T00:00:00+00:00" pubdate data-updated="true">Dec 11<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Virtual Disk Image (<em>VDI</em>) is a Virtual Box container format for guest hard
disk. I found that <em>VDI</em> files on the host system grows over the time. If your
<em>VDI</em> file on the host system is much bigger than used spaces on guest partition
it is time for compaction:</p>

<ol>
<li>Install zerofree tool (<code>apt-get install zerofree</code>).</li>
<li>Remove unused files (<code>apt-get autoremove</code>, <code>apt-get autoclean</code>, <code>orphaner --guess-all</code>).</li>
<li>Reboot the guest system in single user mode (hit <code>e</code> during Grub boot and append single option to the Grub boot parameters).</li>
<li>Remount filesystems as readonly (<code>mount -n -o remount,ro /</code>).</li>
<li>Fill unused block with zeros (<code>zerofree /</code>). It&rsquo;s time consuming operation.</li>
<li>Shutdown the system (<code>poweroff</code>).</li>
<li>Compact VDI files on the host system (<code>VBoxManage modifyhd my.vdi compact</code>). It&rsquo;s time consuming operation.</li>
</ol>


<p>That&rsquo;s all, after the maintenance VDI file size on the host system should be
very close to the used space on the guest partition.</p>

<p>Oh, I forgot to mention: you shoud have a backup before start ;&ndash;)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/03/code-coverage-for-managers-and-developers/">Code Coverage for Managers and Developers</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-03T00:00:00+00:00" pubdate data-updated="true">Dec 3<span>rd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>From time to time, people ask me what code coverage by tests should be. Does 60% mean that project is healthy? Or maybe the goal should be 70% or 80%?</p>

<p><em>I don&rsquo;t know, it depends on your role in the project</em></p>

<p>If you are a manager, Excel is your friend. Manager likes numbers, columns and charts. So the following rules are perfect for them:</p>

<ul>
<li>Below 20% &ndash; red, can not be accepted</li>
<li>Between 20% &ndash; 50% &ndash; yellow, might be accepted conditionally</li>
<li>Above 50% &ndash; green, accepted without doubts</li>
</ul>


<p>But as a developer I know that the numbers are meaningless. I can easily achieve high code coverage by:</p>

<ul>
<li>Measure coverage for integration or even acceptance tests.</li>
<li>Write a lot of unmaintainable tests.</li>
<li>Testing supporting or generic domain instead of core domain, because it&rsquo;s easy.</li>
<li>Testing setters and getters because it&rsquo;s easy.</li>
<li>Testing without assertions.</li>
</ul>


<p>Why would I do that?</p>

<ul>
<li>To meet acceptance criteria (sometimes enforced by the build/deployment tool).</li>
<li>Christmas are coming, and my bonus depends on the code coverage level.</li>
</ul>


<p>Instead focusing on the numbers, manager should promote TDD approach in the team.
Writing the unit tests should be a natural part of development process, not an exception.
But writing unit test (or tests in general) is not easy, especially for badly written code.</p>

<p>If you are a developer you need instant feedback what are you developing.
Waiting one day for Sonar code coverage report is not acceptable.
Write the tests, write the code, run the tests and check code coverage.
Verify that your tests cover all important lines and branches.
Generate report in isolation, only for test under development, check only coverage for tested part of the code.
Everything else is covered by accident.</p>

<p>Figure below illustrates coverage report in my IDE inlined with the tested source code.
Personally I configured Eclipse (STS) with JaCoCo, works like a charm.</p>

<p><img src="https://lh4.googleusercontent.com/-aQXF5ck4hcg/U3uHsdejeqI/AAAAAAAAV8c/-6Kmq7OK5hU/s878/sts-code-coverage.png"></p>

<p>Code coverage reports and tools are not for managers, there are for developers to help them during development.
If you are a manager, focus on the people, their skills, and build TDD approach into the team.</p>

<p><em>We are all professionals, aren&rsquo;t we?</em></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/11/13/how-to-convince-your-manager-to-adopt/">How to Convince Your Manager to Adopt Git</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-11-13T00:00:00+00:00" pubdate data-updated="true">Nov 13<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Distributed Concurrent Versions Systems (DCVSs) like Git or Mercurial has
changed software delivery processes significantly. I would not want to go back
to the mid ages of Subversion, and I&rsquo;m able to convince almost any developer
to use DCVS. Convincing managers is much more tough task. Below I collected
some insights about DVCS which could help.</p>

<p><a href="http://blogs.gartner.com/tom_murphy/2012/05/10/dvcs-begins-to-come-of-%0Aage/">Gartner &ndash; DVCS Begins to Come of
Age</a></p>

<blockquote><p>DVCS systems provide advantages in performance for branch and merge
operations thus enabling a smoother workflow during refactoring and with teams
that may be distributed. Over the last 6 months we have seen significant
investment into support for Git and Mercurial and other vendors who have been
delivering commercial DVCS systems This growing support will speed migration
for organizations that currently use Subversion but are struggling with
branch/merge overhead.</p></blockquote>

<p><a href="http://www.thoughtworks.com/articles/technology-radar-july-2011">ThoughtWorks Technology Radar (July
2011)</a></p>

<blockquote><p>Starting from a challenge posed to the Linux community to stop using
commercial version control, Git has proved itself. Git embodies a well
architected, high performance implementation of distributed version control.
Git is powerful, so it should be used with respect, but that power enables
agile engineering workflows that simply cannot exist with other tools. Git’s
popularity is supported by the existence of GitHub. GitHub combines public and
private Git repositories, social networking, and a host of other innovative
tools and approaches.<br/>
Some tools seek to enable and facilitate different ways of working.
Unfortunately other tools are created using a different premise, one of low
trust in users and the need to enforce a predefined process. ClearCase and TFS
do this. This makes version control systems with “implicit workflow”
unsuitable tools for modern agile software development. Project methodologies
and the best ways of working on a project need to emerge. Tools that enforce
high ceremony around things like check in just get in the way and kill
productivity.</p></blockquote>

<p><img src="https://lh4.googleusercontent.com/-RCjnnI3YBR8/U3usDDBQVTI/AAAAAAAAV9s/YbgJ-lD1D5M/s619/radar-tools-july-2011.jpg"></p>

<p><a href="http://en.wikipedia.org/wiki/Distributed_Concurrent_Versions_System">Wikipedia</a></p>

<blockquote><p><em>String support for non-linear development</em><br/>
Git supports rapid branching and merging, and includes specific tools for
visualizing and navigating a non-linear development history. A core assumption
in Git is that a change will be merged more often than it is written, as it is
passed around various reviewers. Branches in git are very lightweight: A
branch in git is only a reference to a single commit. With its parental
commits, the full branch structure can be constructed.</p>

<p><em>Efficient handling of large projects</em>
Torvalds has described Git as being very fast and scalable, and performance
tests done by Mozilla showed it was an order of magnitude faster than some
revision control systems, and fetching revision history from a locally stored
repository can be one hundred times faster than fetching it from the remote
server. In particular, Git does not get slower as the project history grows
larger.</p></blockquote>

<p><a href="http://blogs.atlassian.com/2013/01/svn-to-git-how-atlassian-made-the-switch-without-sacrificing-active-development/">From SVN to Git &ndash; Atlassian Case Study</a></p>

<blockquote><p>If Subversion has met my version control needs for many years, why should I
change? To me, that is the wrong question. The real question is, &ldquo;How can DVCS
make what we do today even better&rdquo;?</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/01/how-to-fail-software-project-fast-and-efficient/">How to Fail a Software Project Fast and Efficient?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-01T00:00:00+00:00" pubdate data-updated="true">Jun 1<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The short list based on excellent Thomas Sundberg <a href="http://s3-eu-west-1.amazonaws.com/presentations2012/41presentation.pdf">presentation</a>.</p>

<blockquote><p>Divide the team into separate divisions &ndash; analysis, architecture, development, operations, test, etc.</p></blockquote>

<p>Make the communication as hard as possible, different locations, different managers, different cost centres etc.</p>

<blockquote><p>Assign developer to multiple projects managed by different people</p></blockquote>

<p>Developers will be able to set priorities by themselves.</p>

<p>Context switching is cheap.</p>

<blockquote><p>Everything should be written</p></blockquote>

<p>You can always use written document as a evidence, even if it is not valid anymore.</p>

<blockquote><p>Don&rsquo;t allow to communicate development team with customers / end user</p></blockquote>

<p>Developers are only for writing code based on given specifications.</p>

<blockquote><p>Separate Devs and Ops</p></blockquote>

<p>Devs should not be allowed into the production system, they can break something.</p>

<p>Ops do not have to know anything about systems they care.</p>

<blockquote><p>Improvement</p></blockquote>

<p>No courses, no books, no conferences and learn only on personal time.</p>

<p>If you train them, they leave.</p>

<blockquote><p>Measuring</p></blockquote>

<p>Number of fixes per day.</p>

<p>Less than 100% test code coverage is a failure.</p>

<p>100% Javadoc over descriptive naming, etc.</p>

<blockquote><p>Resources</p></blockquote>

<p>Resources can be easily replaced, it does not matter that valuable employees have left.</p>

<p>We easily find next resource.</p>

<blockquote><p>Meetings</p></blockquote>

<p>Schedule lots of them, demand everyone to be present, cancel them late or don&rsquo;t show up or be unprepared.</p>

<p>Always prepare meeting minutes.</p>

<blockquote><p>Planning</p></blockquote>

<p>The most experienced person does it better than whole team.</p>

<p>Don&rsquo;t allow self-organization, only command and control!</p>

<blockquote><p>Demotivation</p></blockquote>

<p>Don&rsquo;t invest in tools, no large screens.</p>

<p>The fastest laptops for managers (powerpoint slides are very heavy).</p>

<blockquote><p>Working offsite</p></blockquote>

<p>Make it extremely difficult to work from home.</p>

<blockquote><p>Deployments</p></blockquote>

<p>Avoid it, that&rsquo;s risky.</p>

<p>Always manual, no more than twice a year.</p>

<p>Different scenarios and teams for DEV, UAT and PROD.</p>

<blockquote><p>Failed builds</p></blockquote>

<p>Who cares, it works on production.</p>

<p>Check-in new changes if the build is red.</p>

<blockquote><p>Company policies</p></blockquote>

<p>Single tool/library/framework/platform for all.</p>

<blockquote><p>Architecture</p></blockquote>

<p>Only &ldquo;ivory tower&rdquo; architects, at least 20.</p>

<blockquote><p>Testing</p></blockquote>

<p>Load and performance tests on the end.</p>

<p>Only manual functional tests.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/31/pure-jee-or-spring-framework/">Pure JEE or Spring Framework</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-31T00:00:00+00:00" pubdate data-updated="true">May 31<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>During my career as J2EE and JEE software developer I have been trying to use pure JEE two o three times.
And I decided to do not repeat this exercise any more, it would be waste of my precious time.</p>

<p>Below you can find short but quite comprehensive summary (based on <a href="http://www.javacodegeeks.com/2012/05/why-i-will-continue-to-use-spring-and.html">Ilias Tsagklis</a>):</p>

<blockquote><p> The strength of Java EE is the open standard established in a documented process by various parties. For this reason building applications for this platform is very popular, although many projects use only a little amount of Java EE API. Another important fact to notice is that every (wise) Java packaged software supplier supports the major Java EE platforms. As a result of all this many larger enterprises host Java EE servers in house anyway. Running Spring applications on Java EE servers is near-by then. This setup may provide benefits for enterprises with many dozens or even hundrets of Java applications in production.</p>

<ol>
<li>Migrating JEE servers is considerably easier because the applications use less server API <em>directly</em>.</li>
<li>For the sake of little migration costs, most of the in-house clients will decide to migrate their business applications to current server versions.</li>
<li>Less server generations in IT landscape, less local development environment generations due to little Java versions in production, simpler ALM solutions &mdash; all in all: manageable complexity and more homogeneous landscape.</li>
<li>Fast response to new client requirements: if you need new (Spring) features you&rsquo;ll only compile a new version of WAR/EAR files and deploy the stuff to an arbitrary Java runtime.</li>
<li>The range of potential target runtime environments will be higher compared to Java EE full stack. Which means you may be &ldquo;more&rdquo; plattform independent.</li>
<li>With Spring you can add smaller peaces of functionality to your applications or server environments (avoids: Snowball-effect).</li>
<li>Compared to Java EE, the complete innovation cycle is faster (from the feature request to the usage in production).</li>
<li>Spring enhancements are made according to actual real world client project requirements which ensures their practical applicability.</li>
<li>Application development teams remain responsible for the application development stack and can decide flexibly which API fits the clients needs.</li>
</ol>


<p>It&rsquo;s difficult to achieve all these benefits in a pure Java EE development stack (some of them address conceptual problems in Java EE). One possible option may be to modularize JEE application server architecture. Modularization as a standard, like in Java SE. It may also be valid to think about the release processes (i.e. JCP).</p></blockquote>

<p>I would add my $.02:</p>

<ul>
<li><p>Not everything is portable across AS (or different version of AS from single vendor).
I migrated JEE applications several times, mainly due to AS end of support. Spring framework provides necessary abstraction.</p></li>
<li><p>JEE lifecycle is extremely long, you have to wait for the new standard, than for the vendor to apply
the changes to the AS, than for the infrastructure team to engineer new AS version. Based on my corporate experience,
it takes ~4 years from the initial release provided by Spring Framework.</p></li>
<li><p>Developer productivity is higher if they can run application on the lightweight container like Jetty or Tomcat.
You can even consider to avoid Servlet container at all and run your application as regular system process.</p></li>
<li><p>Spring Framework enhancements are driven by real use cases not by vendor marketing team or mad scientist.
Did you try to use JPA2 Criteria? Or maybe do you prefer Query DSL instead?</p></li>
<li><p>One size does not fit all, that&rsquo;s the point. Pure JEE is very limited but Spring Framework ecosystem is extraordinary rich.</p></li>
</ul>


<p>I attended JEE evangelists sessions on several conferences around the world. And I can confirm, they did great speaks.
It seams that pure JEE works for them, what is strange that it does not work for other specialists I know ;&ndash;)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/10/artifactory-performance-tuning/">Artifactory Performance Tuning</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-10T00:00:00+00:00" pubdate data-updated="true">Mar 10<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Few years ago I participated in Kirk Pepperdine Java performance tuning
training. One of the greatest technical training which I have ever been! And
also great opportunity to visit Crete :&ndash;) Let&rsquo;s check what I remember from the
training &hellip;</p>

<p>In this blog post I would like to show <em>Artifactory</em> memory utilization
analysis. Before you start any tuning you have to gather some statistics. You
cannot tune application if you don&rsquo;t know what should be improved.</p>

<p>Get basic information about OS where <em>Artifactory</em> is deployed and run using Linux <code>/proc</code> subsystem:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span>cat /proc/cpuinfo | grep processor
</span><span class='line'><span class="go">processor       : 0</span>
</span><span class='line'><span class="go">processor       : 1</span>
</span><span class='line'><span class="go">processor       : 2</span>
</span><span class='line'><span class="go">processor       : 3</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span>cat /proc/meminfo |grep MemTotal
</span><span class='line'><span class="go">MemTotal:      8163972 kB</span>
</span></code></pre></td></tr></table></div></figure>


<p>Collect HTTP requests statistics from Apache request logs (Apache is configured in front of <em>Artifactory</em>):</p>

<p><img src="https://lh6.googleusercontent.com/-1QXK_PIAtiw/U3uby5sPEmI/AAAAAAAAV9U/1GADfkf9a2w/s521/screenshot2.png"></p>

<p>Verify current JVM version and startup parameters:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span>java -version
</span><span class='line'><span class="go">java version &quot;1.6.0_45&quot;</span>
</span><span class='line'><span class="go">Java(TM) SE Runtime Environment (build 1.6.0_45-b06)</span>
</span><span class='line'><span class="go">Java HotSpot(TM) 64-Bit Server VM (build 20.45-b01, mixed mode)</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span>ps awx | grep java
</span><span class='line'><span class="go">-server -Xms2048m -Xmx2048m -Xss256k \</span>
</span><span class='line'><span class="go">-XX:PermSize=256m -XX:MaxPermSize=256m \</span>
</span><span class='line'><span class="go">-XX:NewSize=768m -XX:MaxNewSize=768m \</span>
</span><span class='line'><span class="go">-XX:+UseParallelGC -XX:+UseParallelOldGC \</span>
</span><span class='line'><span class="go">-XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:$CATALINA_HOME/logs/gc.log \</span>
</span><span class='line'><span class="go">-Dartifactory.home=$ARTIFACTORY_HOME</span>
</span></code></pre></td></tr></table></div></figure>


<p>Let me explain JVM parameters:</p>

<p><code>-server</code> Force server mode for VM (instead of client mode.</p>

<p><code>-Xms2048m -Xmx2048m</code> Set up initial and total heap size to 2GB, it is recommended to set heap to fixed size. Default settings are too low for web applications (64MB if I remember).</p>

<p><code>-Xss256k</code> Set stack memory size (256kB for each thread!)</p>

<p><code>-XX:PermSize=256m -XX:MaxPermSize=256m</code> Set permanent generation size in similar way to heap size. Default settings are too low for web applications (64MB if I remember).</p>

<p><code>-XX:NewSize=768m -XX:MaxNewSize=768m</code> One of the most important settings, increase young generation part of heap for short living objects, by default it is &frac14; or even 1/8 of total heap size. Web application creates a huge number of short living objects.</p>

<p><code>-XX:+UseParallelGC -XX:+UseParallelOldGC</code> Utilize multiple CPUs for garbage collection, it should decrease GC time.</p>

<p><code>-XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:$CATALINA_HOME/logs/gc.log</code> Log all GC activities for further analysis.</p>

<p>Check GC log statistics with HPjmeter:</p>

<p><img src="https://lh5.googleusercontent.com/-cS4M5fHVa94/U3uH-obLfVI/AAAAAAAAV80/BNJpz9vfIX4/s648/screenshot.png"></p>

<p>In the summary tab, you can find the average interval between GCs and average GC times.
GC for young generation is called on every 95s for 35ms.
Full GC takes 2.25s, but fortunately it is called only ~three times per day (33 029
seconds).
Great outcomes, you rather don&rsquo;t have a chance to recognize GC &ldquo;stop the world&rdquo; pauses.</p>

<p><img src="http://4.bp.blogspot.com/-Ydc1fO1ZefE/U3W4s-tciyI/AAAAAAAAV7Q/VUoj5cpXr_E/s1600/screenshot1.png"></p>

<p>Based on the above graph, I could say that there is no memory leaks in
<em>Artifactory</em>.
After each full GC memory is freed to the same level.
The peaks on the graph come from nightly jobs executed internally by <em>Artifactory</em> (indexer and backup).</p>

<p>If you are interesting how memory leaks look like, below you can find example from <a href="https://www.jfrog.com/jira/browse/RTFACT-4464">JIRA</a> issue reported by me:</p>

<p><img src="https://lh4.googleusercontent.com/-DB5uA7jCfZ4/U3ulPaafZsI/AAAAAAAAV9g/TqYDEZ-6-p8/s1152/Heap%2520Usage%2520After%2520GC.jpg"></p>

<p>In general, heap size for young generation is enough to handle business hours requests without full GC!!!
And the GC pauses for young generation are very short (30ms).
After gathering baseline statistics I recognized that no further <em>Artifactory</em> tuning is needed :&ndash;)</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/11/02/kafka-streams-dsl-vs-processor-api/">Kafka Streams DSL vs Processor API</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/11/18/apache-bigdata-europe/">Apache BigData Europe Conference Summary</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/09/30/spark-streaming-on-yarn/">Long-running Spark Streaming Jobs on YARN Cluster</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/11/spark-application-assembly/">Spark Application Assembly for Cluster Deployments</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/01/29/spark-kafka-integration2/">Spark and Kafka Integration Patterns, Part 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/06/spark-kafka-integration1/">Spark and Kafka Integration Patterns, Part 1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/01/spark-unit-testing/">Spark and Spark Streaming Unit Testing</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/22/ddd-how-to-learn/">How to Learn DDD</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/15/programming_language_does_not_matter/">Programming Language Does Not Matter</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/20/mastering-nodejs-book-review/">Mastering Node.js - Book Review</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/26/soa-patterns-book-review/">SOA Patterns - Book Review</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/21/release-it-book-review/">Rrelease It! - Book Review</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/29/acceptance-testing-using-jbehave-spring-framework-and-maven/">Acceptance Testing Using JBehave, Spring Framework and Maven</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/27/the-twelve-factor-app-part2/">The Twelve-Factor App - Part 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/26/the-twelve-factor-app-part1/">The Twelve-Factor App - Part 1</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Category Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/architecture' style='font-size: 148.0%'>architecture(4)</a> <a href='/blog/categories/artifactory' style='font-size: 112.0%'>artifactory(1)</a> <a href='/blog/categories/bash' style='font-size: 112.0%'>bash(1)</a> <a href='/blog/categories/books' style='font-size: 136.0%'>books(3)</a> <a href='/blog/categories/conferences' style='font-size: 112.0%'>conferences(1)</a> <a href='/blog/categories/craftsmanship' style='font-size: 136.0%'>craftsmanship(3)</a> <a href='/blog/categories/ddd' style='font-size: 124.0%'>DDD(2)</a> <a href='/blog/categories/dvcs' style='font-size: 112.0%'>DVCS(1)</a> <a href='/blog/categories/git' style='font-size: 124.0%'>git(2)</a> <a href='/blog/categories/hdfs' style='font-size: 112.0%'>hdfs(1)</a> <a href='/blog/categories/java' style='font-size: 124.0%'>java(2)</a> <a href='/blog/categories/jbehave' style='font-size: 112.0%'>jbehave(1)</a> <a href='/blog/categories/jee' style='font-size: 112.0%'>JEE(1)</a> <a href='/blog/categories/jira' style='font-size: 112.0%'>jira(1)</a> <a href='/blog/categories/jms' style='font-size: 112.0%'>JMS(1)</a> <a href='/blog/categories/jvm' style='font-size: 112.0%'>jvm(1)</a> <a href='/blog/categories/kafka' style='font-size: 148.0%'>kafka(4)</a> <a href='/blog/categories/kafka-streams' style='font-size: 112.0%'>kafka streams(1)</a> <a href='/blog/categories/linux' style='font-size: 136.0%'>linux(3)</a> <a href='/blog/categories/maven' style='font-size: 124.0%'>maven(2)</a> <a href='/blog/categories/node-js' style='font-size: 112.0%'>node.js(1)</a> <a href='/blog/categories/performance' style='font-size: 112.0%'>performance(1)</a> <a href='/blog/categories/php' style='font-size: 112.0%'>PHP(1)</a> <a href='/blog/categories/presentations' style='font-size: 112.0%'>presentations(1)</a> <a href='/blog/categories/python' style='font-size: 112.0%'>python(1)</a> <a href='/blog/categories/ruby' style='font-size: 112.0%'>ruby(1)</a> <a href='/blog/categories/sbt' style='font-size: 112.0%'>sbt(1)</a> <a href='/blog/categories/scala' style='font-size: 160.0%'>scala(5)</a> <a href='/blog/categories/smtp' style='font-size: 112.0%'>smtp(1)</a> <a href='/blog/categories/spark' style='font-size: 160.0%'>spark(5)</a> <a href='/blog/categories/spring' style='font-size: 148.0%'>spring(4)</a> <a href='/blog/categories/tdd' style='font-size: 112.0%'>TDD(1)</a> <a href='/blog/categories/virtual-box' style='font-size: 112.0%'>virtual box(1)</a> <a href='/blog/categories/yarn' style='font-size: 112.0%'>yarn(1)</a> </span>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/mkuthan">@mkuthan</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mkuthan',
            count: 10,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>About Me</h1>
  <p>Marcin Kuthan, genuine software engineer at <a href="http://allegrogroup.com/">Allegro Group</a>.</p>
</section>

<section>
	<span>
		<img src="http://www.gravatar.com/avatar/71e9ba5350f53c3416b7ed2617d04ab5" alt="Gravatar of Marcin Kuthan " title="Gravatar of Marcin Kuthan" />
	</span>
</section>
<section>
  <h1>Links</h1>
  <p><a href="http://allegro.tech/"><img src="http://allegro.tech/img/logo-allegro-tech.svg" alt="allegro.tech"></a></p>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Marcin Kuthan -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'mkuthan';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
